<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>20.6. Test-Driven Development &#8212; Introduction to Programming in C#  documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="20.7. The Red, Green, Refactor Methodology" href="red-green-refactor.html" />
    <link rel="prev" title="20.5. Running Tests Part 2:" href="mstest-part2.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html"><span class="section-number">20. </span>Unit Testing</a></li>
    <li class="active"><span class="section-number">20.6. </span>Test-Driven Development</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content " role="main">

    
  <div class="section" id="test-driven-development">
<span id="tdd"></span><h1><span class="section-number">20.6. </span>Test-Driven Development<a class="headerlink" href="#test-driven-development" title="Permalink to this headline">¶</a></h1>
<span class="target" id="index-0"></span><span class="target" id="index-1"></span><p id="index-2">Now that we know more about unit testing, we are going to learn a new way of using them.
Unit testing can easily be added to <em>existing</em> code, but what if you could build tests
to verify functionality of code that <em>doesn’t exist yet</em>.  This may sound
odd, but this process has many benefits as we will learn.</p>
<p>As the name sounds, <strong>Test-driven development (TDD)</strong> is a software development
process where the unit tests are written <em>first</em>. However, that doesn’t tell the
entire story. Writing the tests first and intentionally thinking more about the
code design leads to better code. The name comes from the idea of the tests
<em>driving</em> the development process.</p>
<p>Before we can start using TDD, we need a list of discrete features that can be turned into
unit tests. This will help keep our tests focused on specific functionality which should
lead to code that is easy to read. Along the way we will build confidence as we add features.</p>
<div class="admonition-note admonition">
<p class="admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>TDD is a process that some organizations choose to use. Using the TDD
process is not required when using unit tests.</p>
</div>
<div class="section" id="the-test-code-cycle">
<span id="test-code-cycle"></span><h2><span class="section-number">20.6.1. </span>The Test/Code Cycle<a class="headerlink" href="#the-test-code-cycle" title="Permalink to this headline">¶</a></h2>
<p>With TDD you start with the unit test first. Each test must <em>clearly describe</em>
the behavior it is testing.</p>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>Example test case for our <code class="docutils literal notranslate"><span class="pre">Car</span></code> project:</p>
<ul class="simple">
<li><p>We want each Car object to have 4 wheels.</p></li>
</ul>
</div>
<p>Because the test is for a feature that does NOT exist <em>yet</em>, we need to think
about how the feature will be implemented. This is the time to ask questions
like: <em>Should we add a new property? What about an entirely new constructor?
Where would this data best work within our code?</em></p>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>How could we implement our test case? Remember we aren’t writing the code
yet, only thinking about the design.</p>
</div>
<p>With the design in mind, write the unit test as if the property you imagined <em>already</em>
exists. This may seem a bit odd, but considering how the new code will be used
helps find bugs and flaws earlier. We also have to use test utilities such as
<code class="docutils literal notranslate"><span class="pre">Assert.AreEqual</span></code> to clearly demonstrate that the proposed new code
functions properly.</p>
<p>Next, type out the ideas into an actual test. In this example, the test
references a property that has not been created yet.
In this instance, the test is expecting an int value of 4.</p>
<div class="admonition-example admonition" id="red-light">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>In the <strong>Car class</strong> add the following:</p>
<div class="highlight-csharp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="k">public</span> <span class="kt">double</span> <span class="n">MilesPerGallon</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">public</span> <span class="kt">double</span> <span class="n">Odometer</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
  <span class="k">public</span> <span class="kt">int</span> <span class="n">NumberOfWheels</span><span class="p">;</span>

  <span class="c1">//added property only.  No other code added to this class at this time.</span>
</pre></div>
</td></tr></table></div>
<p>In the <strong>CarTest class</strong>, add the following:</p>
<div class="highlight-csharp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="na">[TestMethod]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">TestNumberOfWheels</span><span class="p">()</span>
<span class="p">{</span>
   <span class="n">Car</span> <span class="n">test_car</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Car</span><span class="p">(</span><span class="s">&quot;Toyota&quot;</span><span class="p">,</span> <span class="s">&quot;Prius&quot;</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="m">50</span><span class="p">);</span>
   <span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="n">test_car</span><span class="p">.</span><span class="n">NumberOfWheels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p><strong>Note:</strong> We added the property to the Car class, but no code about where it will be used,
or how it will be implemented yet.  Think of this as a placeholder,
that you will update as we move forward.</p>
</div>
<p>Now run the test! The test should fail (or not compile at all) because you have
referenced code that does not exist yet.</p>
<div class="figure align-default" id="id1">
<img alt="Graphic of testing output with red 'x' indicating we failed our NumberOfWheels test." src="../../_images/red-green-tests.png" />
<p class="caption"><span class="caption-text">Failed the <code class="docutils literal notranslate"><span class="pre">NumberOfWheels</span></code> test.  Let’s refactor our code.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>Finally, write code to pass the new test. In the earlier chapters, this is
where you started, but with TDD writing new code is the <em>last</em> step.</p>
<p>To make the new test pass, we will need to update our Car class in a few places.
First, we have the property, but how would it used in the program?
Let’s implement this property when we create a Car object.</p>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<dl>
<dt>In the Car class</dt><dd><div class="highlight-csharp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="kt">double</span> <span class="n">MilesPerGallon</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="k">public</span> <span class="kt">double</span> <span class="n">Odometer</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="k">public</span> <span class="kt">int</span> <span class="n">NumberOfWheels</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</td></tr></table></div>
</dd>
</dl>
</div>
<p>Now that we have updated the <code class="docutils literal notranslate"><span class="pre">Car</span></code> properties, we should look at our constructor.
Add <code class="docutils literal notranslate"><span class="pre">NumberOfWheels</span></code> to the constructor.</p>
<div class="admonition-example admonition" id="green-light">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<dl>
<dt>In the Car class, added <code class="docutils literal notranslate"><span class="pre">numberOfWheels</span></code> to the constructor</dt><dd><div class="highlight-csharp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nf">Car</span><span class="p">(</span><span class="kt">string</span> <span class="n">make</span><span class="p">,</span> <span class="kt">string</span> <span class="n">model</span><span class="p">,</span> <span class="kt">int</span> <span class="n">gasTankSize</span><span class="p">,</span> <span class="kt">double</span> <span class="n">milesPerGallon</span><span class="p">,</span> <span class="kt">int</span> <span class="n">numberOfWheels</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">Make</span> <span class="p">=</span> <span class="n">make</span><span class="p">;</span>
   <span class="n">Model</span> <span class="p">=</span> <span class="n">model</span><span class="p">;</span>
   <span class="n">GasTankSize</span> <span class="p">=</span> <span class="n">gasTankSize</span><span class="p">;</span>
   <span class="c1">// Gas tank level defaults to a full tank</span>
   <span class="n">GasTankLevel</span> <span class="p">=</span> <span class="n">gasTankSize</span><span class="p">;</span>
   <span class="n">MilesPerGallon</span> <span class="p">=</span> <span class="n">milesPerGallon</span><span class="p">;</span>
   <span class="n">NumberOfWheels</span> <span class="p">=</span> <span class="n">numberOfWheels</span><span class="p">;</span>  <span class="c1">//&lt;-- added NumberOfWheels here</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</dd>
</dl>
</div>
<p>Once you have updated your constructor, you will need to update your Car objects
by adding an int for number of wheels.
You will most likely see some red squiggles under your <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Car</span></code> objects.</p>
<div class="admonition-example admonition">
<p class="admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<div class="highlight-csharp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">//within the CarTests class</span>

<span class="na">[TestMethod]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">TestNumberOfWheels</span><span class="p">()</span>
<span class="p">{</span>
   <span class="n">Car</span> <span class="n">test_car</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Car</span><span class="p">(</span><span class="s">&quot;Toyota&quot;</span><span class="p">,</span> <span class="s">&quot;Prius&quot;</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="m">50</span><span class="p">,</span> <span class="m">4</span><span class="p">);</span>
   <span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="n">test_car</span><span class="p">.</span><span class="n">NumberOfWheels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p><em>Notice:</em> The values within the new Car object in line 25.</p>
</div>
<p>Now when you run your tests, they should all pass.  Great job!</p>
<div class="figure align-default" id="id2">
<img alt="Screenshot of the testing output screen showing all green checks." src="../../_images/all-green-tests.png" />
<p class="caption"><span class="caption-text">All green!  All tests passed!</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>Coding this way builds confidence in your work. No matter how large your code
base may get, you know that each part has a test to validate its functionality.</p>
<p>Now that we have one passing test for our Car class, we could
confidently move on to writing tests and code for any other remaining features.</p>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="mstest-part2.html"><span aria-hidden="true">&larr;</span> <span class="section-number">20.5. </span>Running Tests Part 2:</a></li>
        
        
        <li class="next"><a href="red-green-refactor.html"><span class="section-number">20.7. </span>The Red, Green, Refactor Methodology <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>